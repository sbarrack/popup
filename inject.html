<!-- Checkout modal
Follow the comments (marked yellow in BigCommerce) to successfully change the modal -->
<style>
.ca-modal h1 {
    font-size: 16pt;
    margin: 0 auto;
    padding-top: 5px;
}
.ca-modal h2 {
    font-size: 12pt;
    color: #333;
    width: 80%;
    margin: 0 auto;
    padding: 15px 0 20px;
}
.ca-modal p {
    font-size: 10pt;
    font-style: italic;
    color: #333;
    margin: 0 auto;
}

div.ca-modal {
    display: none;
    position: fixed;
    left: 0;
    top: 0;
    z-index: 2147483647;
    width: 100%;
    height: 100%;
    font-family: Arial, Helvetica, sans-serif;
    background-color: rgba(0, 0, 0, 0.4);
    -webkit-animation-name: animate;
    -webkit-animation-duration: 0.5s;
    -moz-animation-name: animate;
    -moz-animation-duration: 0.5s;
    -ms-animation-name: animate;
    -ms-animation-duration: 0.5s;
    animation-name: animate;
    animation-duration: 0.5s;
}
@-webkit-keyframes animate {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}
@-moz-keyframes animate {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}
@-ms-keyframes animate {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}
@keyframes animate {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

div.ca-modal-content {
    background-color: #87cefa; /* a solid background color in hex, backup for background-image */
    background-image: linear-gradient(-5deg, #1e90ff, #87cefa, #f8f8ff, #ffffff); /* a degree of rotation and a list of colors in hex to form a gradient, list can be any length greater than 2*/
    margin: auto;
    position: fixed;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 15px;
    width: 700px;
    height: 359px;
    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.2);
    -webkit-animation-name: animatetop;
    -webkit-animation-duration: 0.5s;
    -moz-animation-name: animatetop;
    -moz-animation-duration: 0.5s;
    -ms-animation-name: animatetop;
    -ms-animation-duration: 0.5s;
    animation-name: animatetop;
    animation-duration: 0.5s;
}
@-webkit-keyframes animatetop {
    from {
        top: -100%;
    }
    to {
        top: 0;
    }
}
@-moz-keyframes animatetop {
    from {
        top: -100%;
    }
    to {
        top: 0;
    }
}
@-ms-keyframes animatetop {
    from {
        top: -100%;
    }
    to {
        top: 0;
    }
}
@keyframes animatetop {
    from {
        top: -100%;
    }
    to {
        top: 0;
    }
}

img.ca-modal-logo {
    display: block;
    margin: 20px auto 15px;
    width: 80%;
}

img.ca-modal-cover {
    float: left;
    max-height: 100%;
}

span.ca-modal-exout {
    display: block;
    height: 0;
    transform: translate(-5px, -55px);
    color: #444;
    font-size: 24pt;
    font-weight: bold;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}
span.ca-modal-exout:hover,
span.ca-modal-exout:focus {
    color: #e11;
    cursor: pointer;
}

img.ca-modal-subscribe {
    display: block;
    border: none;
    width: 90%;
    margin: auto;
}
img.ca-modal-subscribe:hover,
img.ca-modal-subscribe:focus {
    cursor: pointer;
    -webkit-filter: brightness(60%);
    -moz-filter: brightness(60%);
    -ms-filter: brightness(60%);
    filter: brightness(60%);
}

div.ca-modal-part {
    float: right;
    width: 57%;
}

@media screen and (max-width: 768px) {
    .ca-modal h1 {
        display: block;
        padding: 0;
        width: 80%;
    }
    .ca-modal h2 {
        display: block;
        width: 90%;
        padding: 0;
        margin: 10px auto 15px;
    }
    .ca-modal p {
        display: none;
    }

    div.ca-modal-content {
        width: 300px;
        height: 472px;
        padding: 15px 0;
    }

    div.ca-modal-part {
        float: left;
        width: 100%;
    }

    img.ca-modal-logo {
        display: none;
    }

    img.ca-modal-cover {
        display: block;
        margin: auto;
        width: 70%;
        float: none;
    }

    span.ca-modal-exout {
        transform: translate(-15px, -5px);
        float: right
    }

    img.ca-modal-subscribe {
        margin: 15px auto 0;
        padding: 0;
    }
}
</style>

<div class="ca-modal">
    <div class="ca-modal-content">
        <span class="ca-modal-exout">&times;</span>
        <div class="ca-modal-part">
            <h1 align=center>IT'S OUR WAY OF SAYING THANKS!</h1><!-- the title of the modal -->
            <h2 align=center>Cool savings on our magazine plus Digital Edition <b>FREE!</b>*</h2><!-- the subtitle of the modal -->
        </div>
        <!-- images are located in Storefront > Image Manager in BigCommerce, back-up/rename the old images before uploading -->
        <img src="//ca-test.mybigcommerce.com/product_images/uploaded_images/cover.png" class="ca-modal-cover"><!-- save your cover image to cover.png, must be 458x590 px -->
        <div class="ca-modal-part">
            <img class="ca-modal-subscribe" src="//ca-test.mybigcommerce.com/product_images/uploaded_images/button.png"></button><!-- save your subscribe button image to subscribe.png, must be 614x88 px -->
            <img class="ca-modal-logo" src="//ca-test.mybigcommerce.com/product_images/uploaded_images/logo.png"><!-- save your logo image to logo.png, must be 601x108 px -->
            <p align=center>*A one-year subscription will be added to your cart and you will be billed separately for the discounted price of $29.95. Offer only valid to those shipping within the United States. One offer per household.</p><!-- the fine print of the modal -->
        </div>
    </div>
</div>

<script>
//<!--
onload = function() {
    let modal = document.getElementsByClassName('ca-modal')[0]
    let close = document.getElementsByClassName('ca-modal-exout')[0]
    let sub = document.getElementsByClassName('ca-modal-subscribe')[0]

    let key = 'ca-modal-hide-1' // rename the key for each promotion
    let oldkeys = ['hide', 'ca-modal-hide'] // add old key names to be removed

    oldkeys.forEach(k => {
        localStorage.removeItem(k)
    })

    let timer = setInterval(function () {
        // localStorage.setItem(key, 'false') // test only, do not change this line
        let country = document.getElementsByClassName('country-name')[0].innerText;
        if (localStorage.getItem(key) != 'true' && country === 'United States') {
            modal.style.display = 'block'
            localStorage.setItem(key, 'true')
        }
    }, 5000)

    function hide() {
        modal.style.display = 'none'
        clearInterval(timer)
    }

    onclick = function(event) {
        if (event.target === modal) {
            hide()
        }
    }

    close.onclick = function() {
        hide()
    }

    sub.onclick = function() {
        hide()
        location.href = '/cart.php?action=add&sku=MUS12CK' // change sku=XXXXXX to your SKU
    }

    let devButton = document.getElementById('dev-button')
    let devButton2 = document.getElementById('dev-button-2')

    devButton.onclick = function () {
        if (localStorage.getItem(key) != 'true') {
            localStorage.setItem(key, 'true')
            modal.style.display = 'block'
        }
    }

    devButton2.onclick = function () {
        localStorage.setItem(key, 'false')
    }
}
//-->
</script>
<!-- End of: Checkout modal -->
